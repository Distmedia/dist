---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";

import { productions } from "../assets/listen.json";

export async function getStaticPaths() {
  return productions.map((production) => {
    return {
      params: { production_slug: production.slug },
      props: { production },
    };
  });
}

interface Props {
  production: {
    slug: string;
    title: string;
    spotify_embeds: string[];
  };
}

let { production } = Astro.props;
---

<Layout title={production.title}>
  <Navbar additional={production.title} back="/listen" />
  <main
    class="min-h-screen min-w-full p-2 pt-14 flex sm:grid sm:grid-cols-[540px_minmax(min-content,800px)]"
  >
    <div></div>

    <div class="mt-4">
      <div style="filter: hue-rotate(-180deg)">
        {
          production.spotify_embeds.map((embed) => (
            <iframe
              class="rounded-xl"
              style="border-radius:12px"
              src={embed}
              width="100%"
              height="152"
              allowfullscreen=""
              allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
              loading="lazy"
            ></iframe>
          ))
        }
      </div>
    </div>
  </main>
</Layout>
